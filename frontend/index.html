<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>eatwhileworking</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      padding: 24px;
      background: #fafafa;
    }
    h1 {
      font-size: 24px;
      margin-bottom: 16px;
    }
    button {
      padding: 12px 16px;
      font-size: 16px;
      cursor: pointer;
      margin-bottom: 16px;
    }
    .card {
      background: white;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }
    .name {
      font-weight: bold;
      font-size: 18px;
    }
    .price {
      color: #666;
      margin: 4px 0;
    }
    .reason {
      margin-top: 8px;
    }
    .hint {
      font-size: 14px;
      color: #888;
      margin-bottom: 12px;
    }
  </style>
</head>
<body>

  <h1>eatwhileworking</h1>

  <!-- 人數選擇 -->
  <div style="margin-bottom:16px;">
    <label>
      <input type="radio" name="people" value="1" checked />
      一個人
    </label>
    &nbsp;&nbsp;
    <label>
      <input type="radio" name="people" value="2-4" />
      2–4 人
    </label>
    &nbsp;&nbsp;
    <label>
      <input type="radio" name="people" value="5+" />
      5 人以上
    </label>
  </div>

  <!-- 位置狀態 -->
  <div id="locationStatus" class="hint">
    嘗試取得目前位置…
  </div>

  <!-- 推薦按鈕 -->
  <button id="recommendBtn">幫我想吃什麼</button>

  <!-- 推薦結果 -->
  <div id="results"></div>

  <script>
    // ========================
    // 狀態
    // ========================
    let userLocation = null;

    const DEFAULT_LOCATION = {
      lat: 25.0330,
      lng: 121.5654
    };

    const recommendBtn = document.getElementById("recommendBtn");
    const resultsEl = document.getElementById("results");
    const locationStatusEl = document.getElementById("locationStatus");

    // ========================
    // 假推薦資料（之後會換成 API / AI）
    // ========================
    const allResults = {
      "1": [
        {
          name: "阿宗便當",
          price: 90,
          reason: "一個人又天氣熱，快又便宜"
        },
        {
          name: "拉麵屋",
          price: 220,
          reason: "一個人也適合坐下來吃"
        }
      ],
      "2-4": [
        {
          name: "熱炒店",
          price: 250,
          reason: "人多可以點菜分享"
        }
      ],
      "5+": [
        {
          name: "合菜餐廳",
          price: 300,
          reason: "多人聚餐比較划算"
        }
      ]
    };

    // ========================
    // 嘗試取得使用者位置（失敗就用預設）
    // ========================
    function initLocation() {
      if (!navigator.geolocation) {
        useDefaultLocation("瀏覽器不支援定位，使用預設位置（台北市）");
        return;
      }

      navigator.geolocation.getCurrentPosition(
        (position) => {
          userLocation = {
            lat: position.coords.latitude,
            lng: position.coords.longitude
          };
          locationStatusEl.textContent = "已取得目前位置";
        },
        () => {
          useDefaultLocation("無法取得位置，使用預設位置（台北市）");
        }
      );
    }

    function useDefaultLocation(message) {
      userLocation = DEFAULT_LOCATION;
      locationStatusEl.textContent = message;
    }

    // ========================
    // 點擊推薦
    // ========================
    recommendBtn.addEventListener("click", () => {
      resultsEl.innerHTML = "";

      const people = document.querySelector(
        'input[name="people"]:checked'
      ).value;

      const results = allResults[people];

      results.forEach(item => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <div class="name">${item.name}</div>
          <div class="price">$${item.price}</div>
          <div class="reason">${item.reason}</div>
        `;
        resultsEl.appendChild(card);
      });
    });

    // 頁面載入時初始化位置
    initLocation();
  </script>

</body>
</html>
